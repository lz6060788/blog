## 新增需求

### 需求：受保护的 API 路由
系统应支持要求用户认证的 API 路由。

#### 场景：受保护的 GET 端点
- **当** 向受保护的端点发出 GET 请求
- **且** 用户已登录
- **则** 系统返回请求的资源
- **且** 响应状态为 200

#### 场景：受保护的端点未认证
- **当** 向受保护的端点发出请求
- **且** 用户未登录
- **则** 系统返回 401 状态码
- **且** 响应包含错误消息"未认证"

### 需求：在 API 路由中访问会话
系统应允许 API 路由处理器访问当前用户会话。

#### 场景：获取当前用户
- **当** API 路由需要知道当前用户
- **则** 它使用 `auth()` 函数获取会话
- **且** 可以从会话中获取用户 ID 和信息

#### 场景：检查认证状态
- **当** API 路由需要验证用户身份
- **则** 它检查会话是否存在
- **且** 如果不存在则返回 401 未认证

### 需求：用户关联的数据访问
系统应允许 API 路由返回与当前用户关联的数据。

#### 场景：获取用户专属资源
- **当** API 路由返回用户专属数据（如用户收藏）
- **则** 系统使用会话中的用户 ID 查询数据库
- **且** 只返回属于该用户的数据
- **且** 防止用户访问其他用户的数据
