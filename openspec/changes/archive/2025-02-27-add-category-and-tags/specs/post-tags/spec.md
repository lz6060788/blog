## ADDED Requirements

### 需求：标签表存储
系统应在数据库中维护 `tags` 表以存储文章标签信息。

#### 场景：创建标签表
- **当** 系统初始化数据库时
- **则** 创建 `tags` 表，包含以下字段：
  - `id`: 文本主键
  - `name`: 标签名称，非空且唯一
  - `slug`: URL 友好的标识符，非空且唯一
  - `createdAt`: 创建时间戳，非空
  - `updatedAt`: 更新时间戳，非空

### 需求：文章与标签多对多关联
系统应通过 `post_tags` 关联表维护文章与标签的多对多关系。

#### 场景：创建关联表
- **当** 系统初始化数据库时
- **则** 创建 `post_tags` 表，包含以下字段：
  - `postId`: 文章 ID，外键引用 posts.id
  - `tagId`: 标签 ID，外键引用 tags.id
  - 主键为 (postId, tagId) 组合

#### 场景：文章关联多个标签
- **当** 创建或更新文章时
- **且** 提供了多个标签 ID
- **则** 在 `post_tags` 表中创建多条关联记录
- **且** 每条记录包含文章 ID 和标签 ID

#### 场景：标签删除不影响文章
- **当** 删除标签时
- **则** `post_tags` 中相关的关联记录被级联删除
- **且** 文章本身不受影响

#### 场景：文章删除不影响标签
- **当** 删除文章时
- **则** `post_tags` 中相关的关联记录被级联删除
- **且** 标签本身不受影响

### 需求：标签 CRUD API
系统应提供标签的增删改查 API 端点。

#### 场景：获取所有标签
- **当** 向 `/api/tags` 发送 GET 请求
- **且** 用户已认证
- **则** 返回所有标签列表
- **且** 响应状态码为 200

#### 场景：获取单个标签
- **当** 向 `/api/tags/[id]` 发送 GET 请求
- **且** 该标签存在
- **则** 返回标签详情
- **且** 响应状态码为 200

#### 场景：创建标签
- **当** 向 `/api/tags` 发送 POST 请求
- **且** 请求体包含有效的标签数据
- **且** 用户已认证
- **则** 创建新标签
- **且** 返回创建的标签
- **且** 响应状态码为 201

#### 场景：更新标签
- **当** 向 `/api/tags/[id]` 发送 PUT 请求
- **且** 该标签存在
- **且** 用户已认证
- **则** 更新标签信息
- **且** 返回更新后的标签
- **且** 响应状态码为 200

#### 场景：删除标签
- **当** 向 `/api/tags/[id]` 发送 DELETE 请求
- **且** 该标签存在
- **且** 用户已认证
- **则** 删除该标签
- **且** 级联删除所有关联记录
- **且** 响应状态码为 204

### 需求：标签名称唯一性
系统应确保标签名称在同一博客中唯一。

#### 场景：标签名称重复
- **当** 创建标签时
- **且** 提供的标签名称已存在
- **则** 返回 400 状态码
- **且** 错误消息指示标签名称已存在

### 需求：文章 API 返回标签信息
系统应在返回文章数据时包含关联的标签信息。

#### 场景：获取文章包含标签
- **当** 获取文章数据时
- **且** 文章关联了标签
- **则** 响应中包含 `tags` 数组
- **且** 每个标签对象包含 id, name, slug 字段

#### 场景：获取文章无标签
- **当** 获取文章数据时
- **且** 文章未关联任何标签
- **则** 响应中 `tags` 为空数组

### 需求：标签自动创建
系统应在保存文章时自动创建不存在的标签。

#### 场景：创建新标签
- **当** 保存文章时
- **且** 提供的标签名称不存在
- **则** 自动创建新标签
- **且** 将文章关联到新创建的标签

### 需求：标签输入 UI
系统应在管理端文章表单中提供标签输入功能。

#### 场景：显示标签输入
- **当** 用户进入文章创建或编辑页面
- **则** 显示标签输入组件
- **且** 支持输入多个标签（逗号分隔或回车添加）
- **且** 显示已选标签列表

#### 场景：移除标签
- **当** 用户点击已选标签的移除按钮
- **则** 该标签从已选列表中移除
- **且** 保存时文章不关联该标签
