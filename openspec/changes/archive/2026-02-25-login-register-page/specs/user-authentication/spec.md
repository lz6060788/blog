# 用户认证规范变更

## ADDED Requirements

### 需求：登录页面入口

系统应提供独立的登录页面作为用户认证入口。

#### 场景：通过导航栏访问登录页

- **当** 用户点击导航栏的"登录"按钮
- **则** 系统导航到 `/login` 页面
- **且** 页面显示所有可用的 OAuth 登录选项

#### 场景：通过 URL 直接访问登录页

- **当** 用户在浏览器地址栏输入 `/login`
- **则** 系统显示登录页面
- **且** 未登录用户可正常访问

### 需求：登录按钮样式定制

系统应为登录页面的 OAuth 按钮提供统一样式规范。

#### 场景：GitHub 按钮样式

- **当** 页面渲染 GitHub 登录按钮
- **则** 按钮采用深色背景（GitHub 黑色 #24292f）
- **且** 包含 GitHub 白色图标
- **且** 按钮文字为"使用 GitHub 登录"（或对应语言）

#### 场景：Google 按钮样式

- **当** 页面渲染 Google 登录按钮
- **则** 按钮采用白色背景（Google 白色 #ffffff）
- **且** 包含 Google 彩色图标
- **且** 按钮有边框以区分背景
- **且** 按钮文字为"使用 Google 登录"（或对应语言）

### 需求：登录页面社交证明

系统可在登录页面显示社交证明元素（可选）。

#### 场景：显示用户数量

- **当** 配置中启用了社交证明功能
- **则** 登录页面显示"已有 X 位用户加入"
- **且** 数据来自数据库的真实用户统计

#### 场景：不显示社交证明

- **当** 配置中未启用社交证明功能
- **则** 登录页面不显示用户数量
- **且** 页面布局保持简洁

## MODIFIED Requirements

### 需求：OAuth 登录支持

原需求描述：系统应支持通过 GitHub 和 Google OAuth 提供商进行用户认证。

#### 场景：通过登录页使用 GitHub 登录

- **当** 用户在登录页面点击"使用 GitHub 登录"按钮
- **则** 系统重定向到 GitHub OAuth 授权页面
- **且** 用户授权后系统创建用户账户（如果不存在）
- **且** 用户被重定向回登录页面
- **且** 登录页面检测到登录成功后重定向到目标页面

#### 场景：通过登录页使用 Google 登录

- **当** 用户在登录页面点击"使用 Google 登录"按钮
- **则** 系统重定向到 Google OAuth 授权页面
- **且** 用户授权后系统创建用户账户（如果不存在）
- **且** 用户被重定向回登录页面
- **且** 登录页面检测到登录成功后重定向到目标页面

### 需求：认证 API 端点

原需求描述：系统应在 `/api/auth/[...nextauth]` 路由提供 NextAuth.js 处理程序。

#### 场景：登录页面调用认证端点

- **当** 用户在登录页面点击 OAuth 登录按钮
- **则** 页面发起请求到 `/api/auth/signin` 端点
- **且** 系统返回对应提供商的登录 URL
- **且** 页面将用户重定向到该 URL

#### 场景：登录成功后重定向

- **当** OAuth 认证成功完成
- **则** 系统将用户重定向回登录页面（带有会话信息）
- **且** 登录页面检测到会话后立即重定向到目标页面

## REMOVED Requirements

无移除的需求。
