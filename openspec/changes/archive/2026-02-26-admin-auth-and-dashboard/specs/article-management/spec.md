## ADDED Requirements

### 需求：文章列表页面

系统应在 `/admin/posts` 路径提供文章列表管理页面。

#### 场景：显示文章列表

- **当** 用户访问 `/admin/posts`
- **则** 系统从数据库查询所有文章（按创建时间倒序）
- **且** 使用表格组件显示文章列表
- **且** 每行显示：标题、创建时间、状态（已发布/草稿）、操作按钮
- **且** 支持分页显示（每页 20 条）

#### 场景：文章列表操作按钮

- **当** 文章列表被渲染
- **则** 每篇文章行包含以下操作：
  - "编辑"按钮（链接到 `/admin/posts/[id]/edit`）
  - "删除"按钮（触发确认对话框）
  - 状态切换开关（已发布/草稿）
- **且** 操作按钮水平排列，间距适当

#### 场景：删除文章确认

- **当** 用户点击"删除"按钮
- **则** 系统显示确认对话框
- **且** 对话框提示"确定要删除这篇文章吗？此操作无法撤销。"
- **且** 提供"取消"和"确认删除"两个按钮
- **且** 点击"确认删除"后执行删除操作并显示成功提示

### 需求：文章状态切换

系统应允许用户切换文章的发布状态。

#### 场景：将文章切换为已发布

- **当** 用户点击文章的状态开关，将其设置为"已发布"
- **则** 系统更新数据库中该文章的 `published` 字段为 `true`
- **且** 文章立即在博客前台显示
- **且** 显示"文章已发布"成功提示

#### 场景：将文章切换为草稿

- **当** 用户点击文章的状态开关，将其设置为"草稿"
- **则** 系统更新数据库中该文章的 `published` 字段为 `false`
- **且** 文章从博客前台隐藏
- **且** 显示"文章已设为草稿"成功提示

### 需求：新建文章

系统应提供创建新文章的功能。

#### 场景：点击新建文章按钮

- **当** 用户点击文章列表页面的"新建文章"按钮
- **则** 系统导航到 `/admin/posts/new`
- **且** 显示文章编辑表单
- **且** 表单包含以下字段：
  - 标题（文本输入框）
  - 内容（Cherry Markdown 编辑器）
  - 摘要（文本域，可选）
  - 标签（标签输入组件，可选）

#### 场景：保存新文章

- **当** 用户填写文章表单并点击"保存为草稿"
- **则** 系统创建新的文章记录（`published: false`）
- **且** 将用户重定向到文章列表页面
- **且** 显示"文章已保存为草稿"成功提示

#### 场景：发布新文章

- **当** 用户填写文章表单并点击"发布"
- **则** 系统创建新的文章记录（`published: true`）
- **且** 将用户重定向到文章列表页面
- **且** 显示"文章已发布"成功提示

### 需求：编辑文章

系统应允许用户编辑现有文章。

#### 场景：打开编辑页面

- **当** 用户点击文章列表中的"编辑"按钮
- **则** 系统导航到 `/admin/posts/[id]/edit`
- **且** 从数据库加载该文章的数据
- **且** 表单预填充文章的当前内容

#### 场景：更新文章

- **当** 用户修改文章内容并点击"保存"
- **则** 系统更新数据库中的文章记录
- **且** 更新文章的 `updatedAt` 时间戳
- **且** 将用户重定向到文章列表页面
- **且** 显示"文章已更新"成功提示

### 需求：文章搜索和筛选

系统应提供文章搜索和状态筛选功能。

#### 场景：按标题搜索文章

- **当** 用户在搜索框输入关键词
- **则** 系统实时过滤文章列表（无需点击搜索按钮）
- **且** 只显示标题包含关键词的文章
- **且** 搜索不区分大小写

#### 场景：按状态筛选文章

- **当** 用户选择状态筛选器（全部/已发布/草稿）
- **则** 系统根据筛选条件过滤文章列表
- **且** "全部"显示所有文章
- **且** "已发布"只显示 `published: true` 的文章
- **且** "草稿"只显示 `published: false` 的文章

### 需求：空状态提示

系统应在文章列表为空时显示友好的提示。

#### 场景：无文章时显示提示

- **当** 数据库中没有任何文章
- **且** 用户访问文章列表页面
- **则** 显示空状态提示
- **且** 提示文案为"还没有任何文章，点击下方按钮创建第一篇吧"
- **且** 显示"新建文章"按钮

#### 场景：搜索无结果时显示提示

- **当** 用户搜索关键词
- **且** 没有匹配的文章
- **则** 显示"没有找到匹配的文章"提示
- **且** 提供"清除搜索"按钮

### 需求：Cherry Markdown 编辑器

系统应在文章编辑页面使用 Cherry Markdown 作为内容编辑器。

#### 场景：编辑器初始化

- **当** 文章编辑页面加载完成
- **则** 页面渲染 Cherry Markdown 编辑器
- **且** 编辑器使用项目主题色（浅色/深色模式自动适配）
- **且** 编辑器高度至少 500px，支持手动调整
- **且** 编辑器默认显示预览模式和编辑模式并排（桌面端）

#### 场景：编辑器工具栏

- **当** Cherry Markdown 编辑器被渲染
- **则** 工具栏包含以下功能按钮：
  - 标题（H1-H6）
  - 粗体、斜体、删除线、下划线
  - 无序列表、有序列表
  - 引用、代码块、代码行内
  - 链接、图片、表格
  - 分割线、清除格式
  - 撤销、重做
- **且** 工具栏图标使用与项目风格一致的图标集
- **且** 工具栏固定在编辑器顶部

#### 场景：编辑器主题适配

- **当** 系统处于浅色模式
- **则** Cherry Markdown 编辑器使用浅色主题
- **且** 编辑器背景色为 `var(--bg-surface)`
- **且** 编辑器文字颜色为 `var(--text-canvas)`
- **且** 工具栏颜色与项目主题一致

- **当** 系统处于深色模式
- **则** Cherry Markdown 编辑器自动切换到深色主题
- **且** 编辑器背景色为 `var(--bg-surface)` (深色)
- **且** 编辑器文字颜色为 `var(--text-canvas)` (深色)
- **且** 代码块语法高亮适配深色主题

#### 场景：图片上传

- **当** 用户在编辑器中点击图片上传按钮
- **则** 系统打开文件选择对话框
- **且** 支持的图片格式：JPG、PNG、GIF、WebP
- **且** 单张图片大小限制：5MB
- **且** 上传成功后插入 Markdown 格式的图片链接
- **且** 上传失败时显示错误提示

#### 场景：代码块语法高亮

- **当** 用户在编辑器中插入代码块
- **则** 系统提供语言选择选项
- **且** 支持常见编程语言：JavaScript、TypeScript、Python、Java、Go、Rust 等
- **且** 预览模式下应用语法高亮样式
- **且** 语法高亮颜色与项目主题一致

#### 场景：实时预览

- **当** 用户在编辑器中输入 Markdown 内容
- **则** 预览区域实时渲染渲染后的 HTML
- **且** 预览样式与博客前台文章展示样式一致
- **且** 支持数学公式（KaTeX 或 MathJax，可选）
- **且** 支持 Mermaid 流程图（可选）

#### 场景：移动端适配

- **当** 用户在移动设备（宽度 < 768px）访问编辑页面
- **则** Cherry Markdown 编辑器采用单列布局
- **且** 默认只显示编辑模式
- **且** 提供"预览"按钮切换到预览模式
- **且** 工具栏自动适配触控操作

#### 场景：编辑器内容保存

- **当** 用户点击"保存为草稿"或"发布"按钮
- **则** 系统从 Cherry Markdown 编辑器获取 Markdown 源内容
- **且** 将 Markdown 内容保存到数据库的 `content` 字段
- **且** 可选择同时渲染 HTML 保存到 `contentHtml` 字段（提高前台渲染性能）

#### 场景：编辑文章时加载内容

- **当** 用户打开编辑文章页面
- **则** Cherry Markdown 编辑器加载文章的 Markdown 内容
- **且** 光标位置在内容开头
- **且** 编辑器状态为可编辑
