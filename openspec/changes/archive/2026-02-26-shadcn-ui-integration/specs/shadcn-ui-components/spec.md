# shadcn/ui 组件库规范

## ADDED Requirements

### 需求：shadcn/ui 组件安装

系统应支持通过 shadcn/ui CLI 工具安装和管理 UI 组件。

#### 场景：初始化 shadcn/ui 配置

- **当** 开发者运行 `npx shadcn@latest init` 命令
- **则** 系统生成 `components.json` 配置文件
- **且** 配置文件使用项目现有的主题变量
- **且** 配置文件设置组件导入路径为 `@/components/ui`

#### 场景：添加单个组件

- **当** 开发者运行 `npx shadcn@latest add <component-name>` 命令
- **则** 系统从 shadcn/ui 仓库获取组件代码
- **且** 系统将组件安装到 `components/ui/` 目录
- **且** 组件使用项目主题变量

### 需求：Button 组件

系统应提供 Button 组件，支持多种样式变体和尺寸。

#### 场景：使用默认 Button

- **当** 开发者使用 `<Button>点击</Button>`
- **则** 系统渲染使用主要主题色的按钮
- **且** 按钮背景使用 `--btn-bg-primary` 变量
- **且** 按钮文字使用 `--btn-text-primary` 变量

#### 场景：使用 ghost 变体 Button

- **当** 开发者使用 `<Button variant="ghost">取消</Button>`
- **则** 系统渲染幽灵样式按钮（透明背景）
- **且** 悬停时背景使用 `--btn-bg-ghost-hover` 变量

#### 场景：使用不同尺寸的 Button

- **当** 开发者使用 `<Button size="sm">小按钮</Button>`
- **则** 系统渲染小尺寸按钮
- **且** 按钮高度为 `h-9`
- **且** 按钮圆角为 `rounded-md`

#### 场景：Button 点击动画

- **当** 用户点击 Button
- **则** 系统显示点击反馈效果
- **且** 按钮缩小到 `scale-0.97`

#### 场景：Button 键盘导航

- **当** 用户使用 Tab 键聚焦 Button
- **则** 系统显示焦点环
- **且** 焦点环使用 `--accent-primary` 颜色
- **且** 用户可按 Enter 或 Space 触发按钮

### 需求：Input 组件

系统应提供 Input 组件，用于文本输入。

#### 场景：使用默认 Input

- **当** 开发者使用 `<Input placeholder="请输入..." />`
- **则** 系统渲染文本输入框
- **且** 输入框背景使用 `--input-bg` 变量
- **且** 输入框边框使用 `--input-border` 变量

#### 场景：Input 聚焦状态

- **当** 用户点击或使用 Tab 键聚焦 Input
- **则** 系统显示聚焦边框
- **且** 聚焦边框使用 `--input-border-focus` 颜色

#### 场景：Input 禁用状态

- **当** 开发者使用 `<Input disabled />`
- **则** 系统渲染禁用的输入框
- **且** 输入框显示为灰色（`--text-disabled`）
- **且** 用户无法在输入框中输入文本

### 需求：Card 组件

系统应提供 Card 相关组件（Card、CardHeader、CardContent、CardFooter）。

#### 场景：使用 Card 组件

- **当** 开发者使用 `<Card><CardContent>内容</CardContent></Card>`
- **则** 系统渲染卡片容器
- **且** 卡片背景使用 `--card-bg` 变量
- **且** 卡片边框使用 `--card-border` 变量
- **且** 卡片阴影使用 `--card-shadow` 变量

#### 场景：Card 圆角样式

- **当** Card 组件渲染
- **则** 系统应用 `rounded-[2rem]` 圆角
- **且** 圆角风格与项目其他卡片一致

### 需求：Label 组件

系统应提供 Label 组件，用于表单标签。

#### 场景：Label 与 Input 关联

- **当** 开发者使用 `<Label htmlFor="email">邮箱</Label><Input id="email" />`
- **则** 系统渲染可点击的标签
- **且** 点击标签时聚焦对应的输入框
- **且** 标签文字颜色使用 `--text-primary`

#### 场景：Label 必填标记

- **当** 开发者使用 `<Label>邮箱 <span className="text-destructive">*</span></Label>`
- **则** 系统在标签后显示红色星号
- **且** 星号颜色使用 `--error-primary`

### 需求：Dialog 组件

系统应提供 Dialog 组件，用于模态对话框。

#### 场景：打开 Dialog

- **当** 用户触发打开对话框的操作
- **则** 系统显示对话框覆盖层
- **且** 覆盖层背景使用半透明黑色（`--bg-overlay`）
- **且** 对话框内容使用 `--bg-surface` 背景

#### 场景：关闭 Dialog

- **当** 用户点击关闭按钮或按 Escape 键
- **则** 系统关闭对话框
- **且** 焦点返回到触发元素

#### 场景：Dialog 键盘陷阱

- **当** Dialog 打开时
- **则** 用户只能通过 Tab 键在对话框内导航
- **且** 焦点不会跳出对话框

### 需求：组件主题适配

所有 shadcn/ui 组件必须使用项目主题变量，确保深色/浅色模式切换一致。

#### 场景：浅色模式下的组件

- **当** 系统处于浅色模式
- **则** 所有组件使用浅色主题的 CSS 变量
- **且** 组件颜色与项目其他部分一致

#### 场景：深色模式下的组件

- **当** 系统切换到深色模式
- **则** 所有组件自动更新为深色主题的 CSS 变量
- **且** 组件颜色与项目其他部分一致

#### 场景：主题切换动画

- **当** 用户切换主题
- **则** 组件颜色以 300ms 过渡动画切换
- **且** 过渡使用 `ease-in-out` 缓动函数

### 需求：组件可访问性

所有 shadcn/ui 组件必须符合 WCAG 2.1 AA 标准。

#### 场景：屏幕阅读器支持

- **当** 屏幕阅读器用户访问组件
- **则** 所有交互元素有正确的 ARIA 标签
- **且** 组件状态变化有适当的公告

#### 场景：键盘导航

- **当** 键盘用户访问组件
- **则** 所有交互元素可通过 Tab 键访问
- **且** 焦点顺序符合逻辑
- **且** 焦点元素有清晰的视觉指示

#### 场景：色彩对比度

- **当** 组件在任何主题下渲染
- **则** 所有文字与背景的对比度 ≥ 4.5:1
- **且** 交互元素有清晰的视觉反馈

### 需求：组件类型安全

所有 shadcn/ui 组件必须提供完整的 TypeScript 类型定义。

#### 场景：Button 组件类型

- **当** 开发者使用 Button 组件
- **则** TypeScript 提供 `variant` 和 `size` 属性的类型提示
- **且** 无效的变体名称会导致类型错误

#### 场景：组件 Props 类型

- **当** 开发者使用任何 shadcn/ui 组件
- **则** TypeScript 提供完整的 Props 类型定义
- **且** 所有必需属性都有类型提示
