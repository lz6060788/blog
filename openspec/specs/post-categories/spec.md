## ADDED Requirements

### 需求：分类表存储
系统应在数据库中维护 `categories` 表以存储文章分类信息。

#### 场景：创建分类表
- **当** 系统初始化数据库时
- **则** 创建 `categories` 表，包含以下字段：
  - `id`: 文本主键
  - `name`: 分类名称，非空且唯一
  - `slug`: URL 友好的标识符，非空且唯一
  - `description`: 分类描述，可为空
  - `createdAt`: 创建时间戳，非空
  - `updatedAt`: 更新时间戳，非空

### 需求：文章与分类关联
系统应支持文章关联到单个分类。

#### 场景：文章关联分类
- **当** 创建或更新文章时
- **且** 提供了有效的 categoryId
- **则** 文章的 `categoryId` 字段设置为该分类 ID
- **且** 文章通过外键约束引用分类

#### 场景：文章无分类
- **当** 创建或更新文章时
- **且** 未提供 categoryId
- **则** 文章的 `categoryId` 字段为 NULL
- **且** 文章不属于任何分类

#### 场景：分类删除不影响文章
- **当** 删除分类时
- **则** 该分类下所有文章的 `categoryId` 设置为 NULL
- **且** 文章不会被级联删除

### 需求：分类 CRUD API
系统应提供分类的增删改查 API 端点。

#### 场景：获取所有分类
- **当** 向 `/api/categories` 发送 GET 请求
- **且** 用户已认证
- **则** 返回所有分类列表
- **且** 响应状态码为 200

#### 场景：获取单个分类
- **当** 向 `/api/categories/[id]` 发送 GET 请求
- **且** 该分类存在
- **则** 返回分类详情
- **且** 响应状态码为 200

#### 场景：创建分类
- **当** 向 `/api/categories` 发送 POST 请求
- **且** 请求体包含有效的分类数据
- **且** 用户已认证
- **则** 创建新分类
- **且** 返回创建的分类
- **且** 响应状态码为 201

#### 场景：更新分类
- **当** 向 `/api/categories/[id]` 发送 PUT 请求
- **且** 该分类存在
- **且** 用户已认证
- **则** 更新分类信息
- **且** 返回更新后的分类
- **且** 响应状态码为 200

#### 场景：删除分类
- **当** 向 `/api/categories/[id]` 发送 DELETE 请求
- **且** 该分类存在
- **且** 用户已认证
- **则** 删除该分类
- **且** 关联的文章 categoryId 设置为 NULL
- **且** 响应状态码为 204

### 需求：分类名称唯一性
系统应确保分类名称在同一博客中唯一。

#### 场景：分类名称重复
- **当** 创建分类时
- **且** 提供的分类名称已存在
- **则** 返回 400 状态码
- **且** 错误消息指示分类名称已存在

### 需求：文章 API 返回分类信息
系统应在返回文章数据时包含关联的分类信息。

#### 场景：获取文章包含分类
- **当** 获取文章数据时
- **且** 文章关联了分类
- **则** 响应中包含 `category` 对象
- **且** `category` 对象包含 id, name, slug 字段

#### 场景：获取文章无分类
- **当** 获取文章数据时
- **且** 文章未关联分类
- **则** 响应中 `category` 字段为 null 或 undefined

### 需求：分类选择器 UI
系统应在管理端文章表单中提供分类选择功能。

#### 场景：显示分类选择器
- **当** 用户进入文章创建或编辑页面
- **则** 显示分类下拉选择器
- **且** 选择器包含所有可用分类
- **且** 包含"无分类"选项

#### 场景：选择分类
- **当** 用户选择一个分类
- **且** 保存文章
- **则** 文章关联到所选分类
