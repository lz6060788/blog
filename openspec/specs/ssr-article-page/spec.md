## 新增需求

### 需求：文章详情页支持服务端渲染
系统应将文章详情页实现为服务端组件，在服务器上完成初始 HTML 渲染，以支持 SEO 和改善首屏加载性能。

#### 场景：服务端渲染文章 HTML
- **当** 用户请求文章详情页时
- **那么** 系统应在服务器上获取文章数据
- **并且** 系统应在服务器上渲染文章内容的初始 HTML
- **并且** 系统应将完整的 HTML 发送到客户端

#### 场景：搜索引擎爬虫可获取完整内容
- **当** 搜索引擎爬虫访问文章页面时
- **那么** 爬虫应能获取渲染后的文章完整内容
- **并且** 爬虫应能读取文章的元数据（标题、描述、标签）

#### 场景：客户端交互组件独立水合
- **当** 页面在客户端加载完成时
- **那么** 系统应仅对需要客户端交互的组件进行水合（hydration）
- **并且** CherryPreview 组件应独立进行客户端水合

### 需求：生成 SEO 友好的元数据
系统应为文章页面生成完整的 SEO 元数据，包括 title、description、open graph tags 等。

#### 场景：生成文章页面标题
- **当** 文章页面渲染时
- **那么** 系统应使用文章标题作为页面 title
- **并且** title 应包含网站名称

#### 场景：生成文章元描述
- **当** 文章页面渲染时
- **那么** 系统应使用文章摘要作为元描述
- **并且** 元描述长度应适合搜索引擎显示（约 160 字符）

#### 场景：生成 Open Graph 标签
- **当** 文章页面渲染时
- **那么** 系统应生成 og:title 标签
- **并且** 系统应生成 og:description 标签
- **并且** 系统应生成 og:type 标签（article）
- **并且** 如果文章有封面图，系统应生成 og:image 标签

### 需求：服务端数据获取
系统应在服务端从数据库获取文章数据。

#### 场景：从数据库获取文章
- **当** 用户请求文章详情页时
- **那么** 系统应通过数据库查询获取文章数据
- **并且** 系统应根据 URL 参数中的文章 ID 查询数据库
- **并且** 系统应仅返回 published 状态为 true 的文章

#### 场景：数据库查询失败
- **当** 数据库查询失败或出错时
- **那么** 系统应返回 404 页面
- **并且** 系统不应暴露数据库错误信息给用户

### 需求：客户端组件协调
系统应正确协调服务端组件和客户端组件，确保主题切换等客户端功能正常工作。

#### 场景：主题状态在服务端和客户端同步
- **当** 页面初始渲染时
- **那么** 服务端应使用默认主题渲染初始 HTML
- **并且** 客户端水合后应恢复用户的主题偏好
- **并且** CherryPreview 组件应能响应客户端主题变化

#### 场景：CherryPreview 作为独立客户端组件
- **当** 文章详情页渲染时
- **那么** CherryPreview 应作为独立的客户端组件嵌入
- **并且** CherryPreview 应接收文章内容和当前主题作为 props
- **并且** CherryPreview 应独立处理客户端交互和主题切换
